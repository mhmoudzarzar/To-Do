<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>To-Do App</title>
<style>
    body {
        font-family: Arial, sans-serif;
        margin: 0;
        padding: 0;
        display: flex;
        flex-direction: column;
        align-items: center;
        background-color: #f4f4f4;
    }
    header {
        background-color: #4CAF50;
        color: white;
        padding: 10px 0;
        width: 100%;
        text-align: center;
    }
    nav {
        margin-top: 10px;
    }
    nav button {
        margin: 0 5px;
        padding: 5px 10px;
        border: none;
        border-radius: 4px;
        background-color: #4CAF50;
        color: white;
        cursor: pointer;
    }
    nav button:hover {
        background-color: #45a049;
    }
    main {
        margin-top: 20px;
        width: 80%;
        max-width: 600px;
    }
    input[type="text"] {
        width: 70%;
        padding: 10px;
        margin-right: 10px;
        border: 1px solid #ccc;
        border-radius: 4px;
    }
    button.add {
        margin-top: 10px;
        padding: 10px 15px;
        border: none;
        border-radius: 4px;
        background-color: #4CAF50;
        color: white;
        cursor: pointer;
    }
    button.add:hover {
        background-color: #45a049;
    }
    ul {
        list-style-type: none;
        padding: 0;
    }
    li {
        background-color: white;
        margin-bottom: 10px;
        padding: 10px;
        border-radius: 4px;
        display: flex;
        justify-content: space-between;
        align-items: center;
    }
    li button {
        margin-left: 5px;
    }
    footer {
        margin-top: 20px;
        padding: 10px 0;
        width: 100%;
        text-align: center;
        background-color: #4CAF50;
        color: white;
        position: fixed;
        bottom: 0;
    }
</style>
</head>
<body>
<header>
    <h1>To-Do App</h1>
</header>
<nav>
    <button id="allBtn">All Tasks</button>
    <button id="activeBtn">Active Tasks</button>
    <button id="completedBtn">Completed Tasks</button>
</nav>
<main>
    <section>
        <div>
            <input type="text" id="taskInput" placeholder="Enter a new task">
            <button class="add" id="addTaskButton">Add Task</button>
        </div>
        <div>
            <ul id="taskList"></ul>
        </div>
    </section>
</main>
<footer>
    <p>&copy; 2024 To-Do App</p>
</footer>

<script>
const taskInput = document.getElementById('taskInput');
const addTaskButton = document.getElementById('addTaskButton');
const taskList = document.getElementById('taskList');

const allBtn = document.getElementById('allBtn');
const activeBtn = document.getElementById('activeBtn');
const completedBtn = document.getElementById('completedBtn');

class Task {
    constructor(name, id = null, completed = false) {
        this.name = name;
        this.id = id || Math.floor(Math.random() * 10000);
        this.completed = completed;
    }

    createTask() {
        const taskItem = document.createElement('li');
        taskItem.id = this.id;

        const taskTextSpan = document.createElement('span');
        taskTextSpan.textContent = this.name;
        taskItem.appendChild(taskTextSpan);

        const completeButton = document.createElement('button');
        completeButton.textContent = this.completed ? 'Undo' : 'Complete';
        completeButton.addEventListener('click', () => this.toggleComplete(taskItem, completeButton));

        const editButton = document.createElement('button');
        editButton.textContent = 'Edit';
        editButton.addEventListener('click', () => this.edit(taskTextSpan));

        const deleteButton = document.createElement('button');
        deleteButton.textContent = 'Delete';
        deleteButton.addEventListener('click', () => this.delete(taskItem));

        const buttonDiv = document.createElement('div');
        buttonDiv.appendChild(completeButton);
        buttonDiv.appendChild(editButton);
        buttonDiv.appendChild(deleteButton);
        taskItem.appendChild(buttonDiv);

        this.updateTaskStyle(taskItem);

        taskList.appendChild(taskItem);
    }

    toggleComplete(taskItem, button) {
        this.completed = !this.completed;
        button.textContent = this.completed ? 'Undo' : 'Complete';
        this.updateTaskStyle(taskItem);

        let taskArray = JSON.parse(localStorage.getItem('taskArray')) || [];
        const index = taskArray.findIndex(t => t.id === this.id);
        if(index > -1) {
            taskArray[index].completed = this.completed;
            localStorage.setItem('taskArray', JSON.stringify(taskArray));
        }
    }

    updateTaskStyle(taskItem) {
        if(this.completed) {
            taskItem.style.textDecoration = 'line-through';
            taskItem.style.backgroundColor = 'green';
            taskItem.style.color = 'white';
            taskItem.style.fontStyle = 'italic';
            taskItem.style.opacity = '0.6';
        } else {
            taskItem.style.textDecoration = 'none';
            taskItem.style.backgroundColor = 'white';
            taskItem.style.color = 'black';
            taskItem.style.fontStyle = 'normal';
            taskItem.style.opacity = '1';
        }
    }

    delete(taskItem) {
        taskItem.remove();
        let taskArray = JSON.parse(localStorage.getItem('taskArray')) || [];
        taskArray = taskArray.filter(t => t.id !== this.id);
        localStorage.setItem('taskArray', JSON.stringify(taskArray));
    }

    edit(taskTextSpan) {
        const newName = prompt("Edit task name:", this.name);
        if(!newName || /^[0-9]+$/.test(newName)) {
            alert('Please enter a valid task.');
            return;
        }
        this.name = newName;
        taskTextSpan.textContent = newName;

        let taskArray = JSON.parse(localStorage.getItem('taskArray')) || [];
        const index = taskArray.findIndex(t => t.id === this.id);
        if(index > -1) {
            taskArray[index].name = this.name;
            localStorage.setItem('taskArray', JSON.stringify(taskArray));
        }
    }
}

// Load tasks on page load
window.addEventListener('load', () => {
    const taskArray = JSON.parse(localStorage.getItem('taskArray')) || [];
    taskArray.forEach(t => {
        const task = new Task(t.name, t.id, t.completed);
        task.createTask();
    });
});

// Add new task
addTaskButton.addEventListener('click', () => {
    const text = taskInput.value.trim();
    if(!text || /^[0-9]+$/.test(text)) {
        alert('Please enter a valid task.');
        return;
    }

    const task = new Task(text);
    task.createTask();
    taskInput.value = '';

    let taskArray = JSON.parse(localStorage.getItem('taskArray')) || [];
    taskArray.push({name: task.name, id: task.id, completed: task.completed});
    localStorage.setItem('taskArray', JSON.stringify(taskArray));
});

// Filter buttons
allBtn.addEventListener('click', () => filterTasks('all'));
activeBtn.addEventListener('click', () => filterTasks('active'));
completedBtn.addEventListener('click', () => filterTasks('completed'));

function filterTasks(type) {
    const items = taskList.querySelectorAll('li');
    items.forEach(li => {
        const taskArray = JSON.parse(localStorage.getItem('taskArray')) || [];
        const taskData = taskArray.find(t => t.id == li.id);
        if(!taskData) return;

        if(type === 'all') li.style.display = 'flex';
        else if(type === 'active') li.style.display = taskData.completed ? 'none' : 'flex';
        else if(type === 'completed') li.style.display = taskData.completed ? 'flex' : 'none';
    });
}
</script>
</body>
</html>
